# Experimenting with adding layernorm and dropout between esm and decoder

checkpoints_every: 24
data_type: TOP-10
fix_seed: 0
ligand_embedding_size: 480
max_pos_weight: 1
model:
  backbone_dropout_rate: 0.3
  classifier_dropout_rate: 0.5
  last_state_dropout_rate: 0.3
  freeze_backbone: true
  freeze_backbone_layers: 30
  freeze_embeddings: true
  hidden_size: 1280
  model_name: facebook/esm2_t33_650M_UR50D
num_ligands: 10
optimizer:
  beta_1: 0.9
  beta_2: 0.999
  decay:
    gamma: 0.2
    min_lr: 0
    num_restarts: 1
    warmup: 512
  eps: 1e-16
  grad_clip_norm: 1
  lr: 5e-5
  momentum: 0.9
  name: adam
  nesterov: true
  use_8bit_adam: false
  weight_decay: 1e-2
  weight_decouple: true
pos_weight_divisor: 30
result_path: ./results/test/
scheduler:
  T_0: 24
  T_max: 24
  T_mult: 2
  eta_min: 0
  eta_min_first: 0.0005
  eta_min_second: 1.0e-05
  name: cosine_annealing
tensorboard_log: true
test_settings:
  batch_size: 16
  num_workers: 4
  test_label_path: ./data/Y01/test_labels.fasta
  test_seq_path: ./data/Y01/test_set.fasta
tqdm_progress_bar: true
train_settings:
  alpha: 0.9
  batch_size: 16
  gamma: 1
  grad_accumulation: 4
  grad_clip_norm: 1
  label_smoothing: 0.0
  max_sequence_length: 768
  mixed_precision: bf16
  num_epochs: 24
  num_workers: 4
  shuffle: true
  train_label_path: ./data/Y01/train_labels.fasta
  train_seq_path: ./data/Y01/train_set.fasta
transformer_head:
  num_heads: 8
  num_layers: 4
  dim_feedforward: 2048
  dropout: 0.3
valid_settings:
  batch_size: 64
  num_workers: 4
  valid_label_path: ./data/Y01/eval_labels.fasta
  valid_seq_path: ./data/Y01/eval_set.fasta
data_root: "./data"
ligands:
  - ADP
  - ATP
  - CA
  - CLA
  - FAD
  - HEM
  - MG
  - NAD
  - NAP
  - ZN
dataset_weight: # square rooted weights
#  ACO: 43.19444444444444
#  ADP: 4.95749202975558
#  AGS: 34.3014705882353
#  AMP: 16.963636363636365
#  ANP: 13.177966101694915
#  ATP: 6.860294117647059
#  BGC: 14.093655589123868
#  BMA: 29.525316455696203
#  CA: 1.5330266184686165
#  CLA: 13.640350877192983
#  CLR: 26.505681818181817
#  CO: 29.15625
#  COA: 18.01158301158301
#  CU: 14.093655589123868
#  FAD: 5.654545454545454
#  FE: 8.768796992481203
#  FE2: 25.080645161290324
#  FES: 17.15073529411765
#  FMN: 10.675057208237986
#  GAL: 20.021459227467812
#  GDP: 13.761061946902656
#  GLC: 10.275330396475772
#  GSH: 23.325
#  GTP: 31.1
#  HEC: 17.670454545454547
#  HEM: 5.520710059171598
#  MAN: 10.459641255605382
#  MG: 1.5808200609962724
#  MN: 5.91254752851711
#  NAD: 7.089665653495441
#  NAP: 10.097402597402597
#  NDP: 19.19753086419753
#  PLP: 12.374005305039788
#  PO4: 12.341269841269842
#  SAH: 11.900510204081632
#  SAM: 21.799065420560748
#  SF4: 9.165029469548134
#  SO4: 21.39908256880734
#  UDP: 30.292207792207794
#  Y01: 44.009433962264154
#  ZN: 1.0
  ACO: 6.572248051043451
  ADP: 2.226542617996696
  AGS: 5.856745733616519
  AMP: 4.1186935263061715
  ANP: 3.6301468429933954
  ATP: 2.6192163174596823
  BGC: 3.7541517802459543
  BMA: 5.4337203144527235
  CA: 1.238154521240631
  CLA: 3.6932845648816426
  CLR: 5.148366907882714
  CO: 5.399652766613794
  COA: 4.244005538590049
  CU: 3.7541517802459543
  FAD: 2.377928816122437
  FE: 2.961215458638767
  FE2: 5.008058022955637
  FES: 4.1413446239256215
  FMN: 3.267270605297025
  GAL: 4.474534526346602
  GDP: 3.7095905362860004
  GLC: 3.205515621000118
  GSH: 4.8295962564173
  GTP: 5.576737397439475
  HEC: 4.203623977647685
  HEM: 2.349619130661733
  MAN: 3.234136864080644
  MG: 1.257306669431238
  MN: 2.431573056380809
  NAD: 2.6626426071659415
  NAP: 3.1776410428811177
  NDP: 4.3814987006956345
  PLP: 3.517670437241071
  PO4: 3.513014352556767
  SAH: 3.449711611726643
  SAM: 4.668946928436942
  SF4: 3.0273799678183995
  SO4: 4.625914241402162
  UDP: 5.503835734486249
  Y01: 6.633960654259577
  ZN: 1.0



